(()=>{"use strict";const e=[{value:87.3,productName:"CyberPunk 2077 - PS4",stock:o(1,200)},{value:439.99,productName:"Fritadeira Sem Óleo Oster",stock:o(1,200)},{value:279.99,productName:"Headset Gamer Havit H2015d",stock:o(1,200)},{value:4699.99,productName:"Lenovo Ideapad L340",stock:o(1,200)},{value:239.99,productName:"Liquidificador Philips",stock:o(1,200)},{value:598.5,productName:"Micro-ondas Consul",stock:o(1,200)},{value:1265.25,productName:"Monitor LED 25'' Gamer LG",stock:o(1,200)},{value:1151.1,productName:"Moto G9 Play",stock:o(1,200)},{value:159.6,productName:"Mouse Gamer Redragon Chroma",stock:o(1,200)},{value:10377.93,productName:"Smart TV OLED 65'' LG",stock:o(1,200)},{value:339,productName:"Teclado Gamer HyperX Alloy Core",stock:o(1,200)},{value:235.83,productName:"The Last Of Us Part II - PS4",stock:o(1,200)},{value:264.48,productName:"SSD 240 gb Plus - Sandisk",stock:o(1,200)},{value:3403.08,productName:"Xbox Series S",stock:o(1,200)}],t=e=>e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});function o(e,t){return Math.floor(Math.random()*(t-e)+e)}const r={deleteOne(e){l.splice(e,1),d.updateBalance(),i()},deleteAll(){d.countingProducts.innerHTML="0 produtos",d.totalHtml.innerHTML=`Total: ${t(0)}`,l.splice(0),i()},createDiv(e,o){const r=document.querySelector(".section-cards"),c=document.createElement("div");r.removeAttribute("style"),r.appendChild(c),c.classList.add("card"),c.style="--x:"+.2*o+"s",c.innerHTML=function(e){const{productName:o,value:r}=e;return`\n        <img src="./images/${o}.jpg" alt="${o}">\n        <p>${o}</p>\n        <p>${t(r)}</p>`}(e)},stockZero(e){document.querySelector(".section-cards .card:nth-child("+(e+1)+")").classList.add("empty")},stockExist(e){document.querySelector(".section-cards .card:nth-child("+(e+1)+")").classList.remove("empty")}};function c(e,t=""){const o=document.querySelector('input[type="number"]'+t);let r=document.querySelector(".stock");r||(r=document.createElement("p")),r.className="stock",r.innerText="Estoque: "+e,o.parentElement.insertAdjacentElement("afterend",r)}function n(e,t=""){const o=document.querySelector(".form-overlay"+t+"__form__img"),r=document.createElement("img");o.innerHTML="",o.appendChild(r),r.className="img",r.src="./images/"+e+".jpg"}function u(e,o,r="",c){const n=document.querySelector(".form-overlay"+r+"__form__calculation__cost"),u=document.querySelector(".form-overlay"+r+"__form__calculation__quantity"),a=document.querySelector(".form-overlay"+r+"__form .stock");let{productsQuantity:s}=m.catchValues();s=""===r?s:Number(document.querySelector("#productsQuantityToRemove").value);const l=s>1?" Unidades":" Unidade",i=e*s,d=""===r?o-s:c-s,y=""===r?"Estoque: ":"Sobrará: ";if(s<=0)return n&&u&&(n.innerHTML="Custo: "+t(i),u.innerHTML=0+l),void(a.innerHTML="Estoque: "+o);s>c||(n&&u&&(n.innerHTML="Custo: "+t(i),u.innerHTML=s+l),a.innerHTML=y+d)}function a(e,t,o="nothingHere",r){const c="nothingHere"!==o?"-confirm-delete":"";(document.querySelector(o)||m.productsQuantity).value=1,u(e,t,c,r)}function s(e,t,o="",r="nothingHere",c){const n=document.querySelector(".form-overlay"+o+" .more"),a=document.querySelector(".form-overlay"+o+" .less"),s=document.querySelector(r)||m.productsQuantity;n.onclick=function(){(""===o?Number(s.value)>=t:s.value>=c)||(s.value=Number(s.value)+1,u(e,t,o,c))},a.onclick=function(){Number(s.value)<=0||(s.value=Number(s.value)-1,u(e,t,o,c),s.value<1&&y.close(""!==o?"formConfirmDelete":"form"))}}const l=[];function i(){const o=document.querySelector(".cart-overlay__content__cart");!function(){const e=document.querySelector(".header__cart");l.length>0?e.classList.add("filled"):e.classList.remove("filled")}(),function(e){if(e.innerHTML="",0===l.length)return e.innerHTML="Suas compras estarão aqui no futuro!",void e.classList.add("empty");e.classList.remove("empty")}(o),function(e){l.forEach(((o,r)=>{const c=document.createElement("div");c.classList.add("card"),c.innerHTML=function(e){const{productName:o,value:r,productsQuantity:c}=e;return`\n            <a href="#" class="delete">\n                <?xml version="1.0" encoding="UTF-8"?>\n                <svg version="1.1" viewBox="0 -256 1792 1792" xmlns="http://www.w3.org/2000/svg" class= "trash">\n                    <g transform="matrix(1 0 0 -1 197.42 1255.1)">\n                        <path d="m512 800v-576q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v576q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-576q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v576q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-576q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v576q0 14 9 23t23 9h64q14 0 23-9t9-23zm128-724v948h-896v-948q0-22 7-40.5t14.5-27 10.5-8.5h832q3 0 10.5 8.5t14.5 27 7 40.5zm-672 1076h448l-48 117q-7 9-17 11h-317q-10-2-17-11zm928-32v-64q0-14-9-23t-23-9h-96v-948q0-83-47-143.5t-113-60.5h-832q-66 0-113 58.5t-47 141.5v952h-96q-14 0-23 9t-9 23v64q0 14 9 23t23 9h309l70 167q15 37 54 63t79 26h320q40 0 79-26t54-63l70-167h309q14 0 23-9t9-23z" fill="currentColor"/>\n                    </g>\n                </svg>\n            </a>\n            <img src="./images/${o}.jpg" alt="${o}">\n            <p>${o}</p>\n            <p>${c} ${c>1?"unidades":"unidade"} por ${t(r*c)}</p>`}(o),c.style="--x:"+.2*r+"s",e.appendChild(c)}))}(o),document.querySelectorAll(".delete").forEach(((t,o)=>{t.addEventListener("click",(()=>{let t;const m=l[o],p=m.productName;e.forEach(((e,o)=>{e.productName===p&&(t=o,function(e,t,o,r){y.open("formConfirmDelete"),n(e,"-confirm-delete"),c(t,"#productsQuantityToRemove"),function(e,t,o){y.formConfirmDelete.querySelector("form").querySelector('input[type="number"]').addEventListener("focus",(r=>{const c=r.target;c.oninput=function(){Number(c.value)>=o&&(c.value=o),u(e,t,"-confirm-delete",o)}}))}(o,t,r),s(o,t,"-confirm-delete","#productsQuantityToRemove",r),a(o,t,"#productsQuantityToRemove",r)}(e.productName,e.stock,e.value,m.productsQuantity))})),y.formConfirmDelete.querySelector("form").onsubmit=function(t,o){const c={...l[t]};return n=>{n.preventDefault();let{value:u}=document.querySelector("#productsQuantityToRemove");u=Number(u),l[t]={...l[t],productsQuantity:c.productsQuantity-u},u===c.productsQuantity?r.deleteOne(t):(d.updateBalance(),i()),c.productsQuantity=u,function(t,o){const c=e[o],n=c.stock+t.productsQuantity;n>t.stock||(c.stock=n,c.stock>0&&r.stockExist(o))}(c,o),y.close("formConfirmDelete")}}(o,t)}))}))}const d={countingProducts:document.querySelector(".counting-products"),totalHtml:document.querySelector(".total"),sumQuantity(){let e=0;return l.forEach((t=>{const o=t.productsQuantity;e+=o})),e},sumPrice(){let e=0;return l.forEach((t=>{const o=t.productsQuantity,r=t.value;e+=r*o})),e},updateBalance(){const e=this.sumQuantity(),o=this.sumPrice();this.countingProducts.innerHTML=`${e} produtos`,this.totalHtml.innerHTML=`Total: ${t(o)}`}},m={form:document.querySelector(".form-overlay__form"),productsQuantity:document.getElementById("productsQuantity"),catchValues(){return{productsQuantity:Number(this.productsQuantity.value)}},checkFields(){if(""===this.catchValues().productsQuantity||this.catchValues().productsQuantity<=0)throw Error},clearFields(){this.productsQuantity.value="",document.querySelector(".form-overlay__form__img").innerHTML="",document.querySelector(".form-overlay__form__calculation__quantity").innerHTML="0 unidades",document.querySelector(".form-overlay__form__calculation__cost").innerHTML="Custo: R$ 0,00"},pushToCart(e){let[t,o]=[!1,-1];l.forEach((({productName:r},c)=>{r===e.productName&&(t=!0,o=c)})),t?l[o].productsQuantity+=e.productsQuantity:l.push(e)},submit(t){try{const o={...this.catchValues(),...t};this.checkFields(),this.pushToCart(o),d.updateBalance(),i(),y.close("form"),function(t,o){const c=e.indexOf(t),n=e[c],u=n.stock-o;u<0||(n.stock=u,n.stock<=0&&r.stockZero(c))}(t,o.productsQuantity)}catch(e){console.error(e);const t=window.screen.height,o=window.scrollY;this.productsQuantity.style.boxShadow="0 0 6px #ee2828",setTimeout((()=>{const e=document.body.appendChild(document.createElement("div"));e.appendChild(document.createElement("div")).innerHTML="Por favor insira valores válidos no campo",e.className="errorMenssage",e.style.top=.25*t+o+"px",setTimeout((()=>{e.classList.add("on")}),100)}),100),this.productsQuantity.addEventListener("focus",(()=>{this.productsQuantity.style.boxShadow="none"})),setTimeout((()=>{document.querySelector(".errorMenssage").classList.remove("on"),setTimeout((()=>{document.querySelector(".errorMenssage").remove(),this.productsQuantity.style.boxShadow="none"}),1e3)}),4e3)}}},y={form:document.querySelector(".form-overlay"),formConfirmDelete:document.querySelector(".form-overlay-confirm-delete"),cart:document.querySelector(".cart-overlay"),sideBar:document.querySelector(".overlay-side-bar"),menu:document.querySelector(".header__menu"),body:document.querySelector("body"),open(e){"form"===e&&m.clearFields(),this[e].classList.add("active")},close(e){this[e].classList.remove("active")},openClose(){this.body.classList.toggle("menu--active"),this.menu.classList.toggle("active"),this.sideBar.classList.toggle("active")}};function p(e,t){localStorage.setItem(e,t)}const v=document.querySelector("body"),f=document.querySelector(".choose-theme__toggle"),h=document.querySelector("#theme");function q(){v.classList.toggle("dark"),p("theme",v.classList.contains("dark")?"dark":"light")}let _;const S=[document.querySelector(".form-overlay__form__header img"),document.querySelector(".form-overlay-confirm-delete__form__header img")];document.querySelector(".header__cart").addEventListener("click",(()=>{y.open("cart"),document.querySelector(".close-window-icon").addEventListener("click",(()=>{y.close("cart")})),i()})),document.querySelector(".header__menu").addEventListener("click",(()=>{y.openClose()})),document.querySelector(".overlay-side-bar").addEventListener("click",(e=>{e.target.classList.contains("overlay-side-bar")&&y.openClose()})),S[0].addEventListener("click",(()=>{y.close("form")})),S[1].addEventListener("click",(()=>{y.close("formConfirmDelete")})),document.querySelector(".section-cards").innerHTML="",e.forEach(((e,t)=>{r.createDiv(e,t)})),document.querySelectorAll(".card").forEach(((o,r)=>{o.addEventListener("click",(()=>{_=e[r],function(o){const r=e.indexOf(o),{value:l,productName:i,stock:d}=e[r];document.querySelector(".form-overlay__form__calculation__cost").innerHTML=`Custo: ${t(0)}`,d<=0||(y.open("form"),n(i),c(d),function(e,t){document.querySelector('.form-overlay__form input[type="number"]').addEventListener("focus",(()=>{m.productsQuantity.oninput=function(){m.catchValues().productsQuantity>=t&&Number(m.productsQuantity.value=t),u(e,t)}}))}(l,d),s(l,d),a(l,d))}(_)}))})),"dark"===localStorage.getItem("theme")?q():p("theme","light"),f.addEventListener("click",(()=>{q()})),h.addEventListener("input",(()=>{q()})),document.querySelector(".form-overlay__form").addEventListener("submit",(e=>{e.preventDefault(),m.submit(_)}))})();
//# sourceMappingURL=bundle.js.map