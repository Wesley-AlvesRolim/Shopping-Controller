(()=>{"use strict";const e=e=>e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),t={deleteOne(e){o.splice(e,1),r.updateBalance(),a()},deleteAll(){r.countingProducts.innerHTML="0 produtos",r.totalHtml.innerHTML=`Total: ${e(0)}`,o.splice(0),a()},createDiv(t){const o=document.querySelector(".section-cards"),a=document.createElement("div");o.removeAttribute("style"),o.appendChild(a),a.classList.add("card"),a.innerHTML=function(t){const{productName:o,value:a,image:r}=t;return`\n        <img src="${r}" alt="${o}">\n        <p>${o}</p>\n        <p>${e(a)}</p>`}(t)}},o=[];function a(){const a=document.querySelector(".cart-overlay__content__cart");if(a.innerHTML="",0===o.length)return a.innerHTML="Suas compras estarão aqui no futuro!",void a.classList.add("empty");a.classList.remove("empty"),o.forEach((t=>{const o=document.createElement("div");o.classList.add("card"),o.innerHTML=function(t){const{productName:o,value:a,image:r,productsQuantity:s}=t;return`\n            <a href="#" class="delete">\n                <img src = "./assets/trash.svg" alt = "Trash" class= "trash" >\n            </a >\n            <img src="${r}" alt="${o}">\n            <p>${o}</p>\n            <p>${s} ${s>1?"unidades":"unidade"} por ${e(a*s)}</p>`}(t),a.appendChild(o)})),document.querySelectorAll(".delete").forEach(((e,o)=>{e.addEventListener("click",(()=>{t.deleteOne(o)}))}))}const r={countingProducts:document.querySelector(".counting-products"),totalHtml:document.querySelector(".total"),sumQuantity(){let e=0;return o.forEach((t=>{const o=t.productsQuantity;e+=o})),e},sumPrice(){let e=0;return o.forEach((t=>{const o=t.productsQuantity,a=t.value;e+=a*o})),e},updateBalance(){const t=this.sumQuantity(),o=r.sumPrice();this.countingProducts.innerHTML=`${t} produtos`,this.totalHtml.innerHTML=`Total: ${e(o)}`}},s={productsQuantity:document.getElementById("productsQuantity"),catchValues(){return{productsQuantity:Number(this.productsQuantity.value)}},checkFields(){if(""===this.catchValues().productsQuantity||this.catchValues().productsQuantity<=0)throw Error},clearFields(){this.productsQuantity.value="",document.querySelector(".form-overlay__form__img").innerHTML="",document.querySelector(".form-overlay__form__calculation__quantity").innerHTML="0 unidades",document.querySelector(".form-overlay__form__calculation__cost").innerHTML="Custo: R$ 0,00"},submit(e,t){e.preventDefault();try{const e={...this.catchValues(),...t};this.checkFields(),o.push(e),r.updateBalance(),i.close()}catch(e){this.productsQuantity.style.boxShadow="0 0 6px #ee2828",setTimeout((()=>{const e=document.body.appendChild(document.createElement("div"));e.appendChild(document.createElement("div")).innerHTML="Por favor insira valores válidos nos campos",e.className="errorMenssage",setTimeout((()=>{e.classList.add("on")}),100)}),100),this.productsQuantity.addEventListener("focus",(()=>{this.productsQuantity.style.boxShadow="none"})),setTimeout((()=>{document.querySelector(".errorMenssage").classList.remove("on"),setTimeout((()=>{document.querySelector(".errorMenssage").remove()}),1e3)}),4e3)}}},i={open(){document.querySelector(".form-overlay").classList.add("active"),s.clearFields()},close(){document.querySelector(".form-overlay").classList.remove("active")}},c={sideBarElement:document.querySelector(".overlay-side-bar"),menu:document.querySelector(".header__menu"),openClose(){this.menu.classList.toggle("active"),this.menu.classList.toggle("fixed"),this.sideBarElement.classList.toggle("active")}},u={cartOverlay:document.querySelector(".cart-overlay"),open(){this.cartOverlay.classList.add("active")},close(){this.cartOverlay.classList.remove("active")}},n=[{value:87.3,productName:"CyberPunk 2077 - PS4",image:"https://images-submarino.b2w.io/produtos/01/00/img/1466225/4/1466225463_1SZ.jpg"},{value:439.99,productName:"Fritadeira Sem Óleo Oster",image:"https://images-submarino.b2w.io/produtos/01/00/img/1481124/3/1481124311P1.jpg"},{value:279.99,productName:"Headset Gamer Havit H2015d",image:"https://images-submarino.b2w.io/produtos/01/00/img/1809794/0/1809794044_1SZ.jpg"},{value:4699.99,productName:"Lenovo Ideapad L340",image:"https://images-submarino.b2w.io/produtos/01/00/img/2430049/7/2430049779_1SZ.jpg"},{value:239.99,productName:"Liquidificador Philips",image:"https://images-submarino.b2w.io/produtos/01/00/img/134532/8/134532811_4GG.jpg"},{value:598.5,productName:"Micro-ondas Consul",image:"https://images-submarino.b2w.io/produtos/01/00/img7/01/00/item/116796/3/116796362_5GG.jpg"},{value:1265.25,productName:"Monitor LED 25'' Gamer LG",image:"https://images-submarino.b2w.io/produtos/01/00/img/1729775/6/1729775687_4GG.jpg"},{value:1151.1,productName:"Moto G9 Play",image:"https://images-submarino.b2w.io/produtos/01/00/img/1962217/0/1962217075_1SZ.jpg"},{value:159.6,productName:"Mouse Gamer Redragon Chroma",image:"https://images-submarino.b2w.io/produtos/01/00/img/46419/3/46419319_3GG.jpg"},{value:2922.99,productName:"Playstation 4 + 3 Games",image:"https://images-submarino.b2w.io/produtos/01/00/img/2317562/0/2317562028P1.jpg"},{value:10377.93,productName:"Smart TV OLED 65'' LG",image:"https://images-submarino.b2w.io/produtos/01/00/img/1735043/1/1735043183_1SZ.jpg"},{value:339,productName:"Teclado Gamer HyperX Alloy Core",image:"https://images-submarino.b2w.io/produtos/01/00/img/98025/6/98025652_1SZ.jpg"},{value:235.83,productName:"The Last Of Us Part II - PS4",image:"https://images-submarino.b2w.io/produtos/01/00/img/1459449/0/1459449098_1SZ.jpg"},{value:264.48,productName:"SSD 240 gb Plus - Sandisk",image:"https://images-submarino.b2w.io/produtos/01/00/images/134409/7/134409750P1.jpg"},{value:3403.08,productName:"Xbox Series S",image:"https://images-submarino.b2w.io/produtos/01/00/img/2117190/5/2117190565P1.jpg"}];let d;document.querySelector(".header__cart").addEventListener("click",(()=>{u.open(),document.querySelector(".close-window-icon").addEventListener("click",(()=>{u.close()})),a()})),document.querySelector(".header__menu").addEventListener("click",(()=>{c.openClose()})),document.querySelector(".form-overlay__form__actions").addEventListener("click",(e=>{"A"===e.target.tagName&&i.close()})),document.querySelector(".section-cards").innerHTML="",n.forEach((e=>{t.createDiv(e)})),document.querySelectorAll(".card").forEach(((t,o)=>{const{value:a,image:r}=n[o];t.addEventListener("click",(()=>{i.open(),function(t,o){document.querySelector(".form-overlay__form__calculation__cost").innerHTML=`Custo: ${e(0)}`,function(e){const t=document.querySelector(".form-overlay__form__img"),o=document.createElement("img");t.appendChild(o),o.classList.add("img"),o.setAttribute("src",e)}(o),function(t,o=100){const a=document.querySelector(".form-overlay__form__calculation__cost"),r=document.querySelector(".form-overlay__form__calculation__quantity");document.querySelector('input[type="number"]').addEventListener("focus",(()=>{s.productsQuantity.oninput=function(){s.catchValues().productsQuantity>=o&&Number(s.productsQuantity.value=o);const i=s.catchValues().productsQuantity>1?" Unidades":" Unidade",c=t*s.catchValues().productsQuantity;if(s.catchValues().productsQuantity<=0)return a.innerHTML="Custo: "+e(c),void(r.innerHTML=0+i);a.innerHTML="Custo: "+e(c),r.innerHTML=s.catchValues().productsQuantity+i}}))}(t)}(a,r),d=n[o]}))})),document.querySelector("form").addEventListener("submit",(e=>{s.submit(e,d)}))})();