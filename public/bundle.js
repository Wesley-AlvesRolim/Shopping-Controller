(()=>{"use strict";const e=e=>e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),t={deleteOne(e){o.splice(e,1),a.updateBalance(),r()},deleteAll(){a.countingProducts.innerHTML="0 produtos",a.totalHtml.innerHTML=`Total: ${e(0)}`,o.splice(0),r()},createDiv(t){const o=document.querySelector(".section-cards"),r=document.createElement("div");o.removeAttribute("style"),o.appendChild(r),r.classList.add("card"),r.innerHTML=function(t){const{productName:o,value:r,image:a}=t;return`\n        <img src="${a}" alt="${o}">\n        <p>${o}</p>\n        <p>${e(r)}</p>`}(t)}},o=[];function r(){const r=document.querySelector(".cart-overlay__content__cart");!function(){const e=document.querySelector(".header__cart");o.length>0?e.classList.add("filled"):e.classList.remove("filled")}(),function(e){if(e.innerHTML="",0===o.length)return e.innerHTML="Suas compras estarão aqui no futuro!",void e.classList.add("empty");e.classList.remove("empty")}(r),function(t){o.forEach((o=>{const r=document.createElement("div");r.classList.add("card"),r.innerHTML=function(t){const{productName:o,value:r,image:a,productsQuantity:s}=t;return`\n            <a href="#" class="delete">\n                <img src = "./assets/trash.svg" alt = "Trash" class= "trash" >\n            </a >\n            <img src="${a}" alt="${o}">\n            <p>${o}</p>\n            <p>${s} ${s>1?"unidades":"unidade"} por ${e(r*s)}</p>`}(o),t.appendChild(r)}))}(r),document.querySelectorAll(".delete").forEach(((e,o)=>{e.addEventListener("click",(()=>{t.deleteOne(o)}))}))}const a={countingProducts:document.querySelector(".counting-products"),totalHtml:document.querySelector(".total"),sumQuantity(){let e=0;return o.forEach((t=>{const o=t.productsQuantity;e+=o})),e},sumPrice(){let e=0;return o.forEach((t=>{const o=t.productsQuantity,r=t.value;e+=r*o})),e},updateBalance(){const t=this.sumQuantity(),o=a.sumPrice();this.countingProducts.innerHTML=`${t} produtos`,this.totalHtml.innerHTML=`Total: ${e(o)}`}},s={productsQuantity:document.getElementById("productsQuantity"),catchValues(){return{productsQuantity:Number(this.productsQuantity.value)}},checkFields(){if(""===this.catchValues().productsQuantity||this.catchValues().productsQuantity<=0)throw Error},clearFields(){this.productsQuantity.value="",document.querySelector(".form-overlay__form__img").innerHTML="",document.querySelector(".form-overlay__form__calculation__quantity").innerHTML="0 unidades",document.querySelector(".form-overlay__form__calculation__cost").innerHTML="Custo: R$ 0,00"},submit(e){try{const t={...this.catchValues(),...e};this.checkFields(),o.push(t),a.updateBalance(),r(),c.close("form")}catch(e){this.productsQuantity.style.boxShadow="0 0 6px #ee2828",setTimeout((()=>{const e=document.body.appendChild(document.createElement("div"));e.appendChild(document.createElement("div")).innerHTML="Por favor insira valores válidos nos campos",e.className="errorMenssage",setTimeout((()=>{e.classList.add("on")}),100)}),100),this.productsQuantity.addEventListener("focus",(()=>{this.productsQuantity.style.boxShadow="none"})),setTimeout((()=>{document.querySelector(".errorMenssage").classList.remove("on"),setTimeout((()=>{document.querySelector(".errorMenssage").remove()}),1e3)}),4e3)}}},c={form:document.querySelector(".form-overlay"),cart:document.querySelector(".cart-overlay"),sideBar:document.querySelector(".overlay-side-bar"),menu:document.querySelector(".header__menu"),body:document.querySelector("body"),open(e){"form"===e&&s.clearFields(),this[e].classList.add("active")},close(e){this[e].classList.remove("active")},openClose(){this.body.classList.toggle("menu--active"),this.menu.classList.toggle("active"),this.sideBar.classList.toggle("active")}},i=[{value:87.3,productName:"CyberPunk 2077 - PS4",image:"https://images-submarino.b2w.io/produtos/01/00/img/1466225/4/1466225463_1SZ.jpg"},{value:439.99,productName:"Fritadeira Sem Óleo Oster",image:"https://images-submarino.b2w.io/produtos/01/00/img/1481124/3/1481124311P1.jpg"},{value:279.99,productName:"Headset Gamer Havit H2015d",image:"https://images-submarino.b2w.io/produtos/01/00/img/1809794/0/1809794044_1SZ.jpg"},{value:4699.99,productName:"Lenovo Ideapad L340",image:"https://images-submarino.b2w.io/produtos/01/00/img/2430049/7/2430049779_1SZ.jpg"},{value:239.99,productName:"Liquidificador Philips",image:"https://images-submarino.b2w.io/produtos/01/00/img/134532/8/134532811_4GG.jpg"},{value:598.5,productName:"Micro-ondas Consul",image:"https://images-submarino.b2w.io/produtos/01/00/img7/01/00/item/116796/3/116796362_5GG.jpg"},{value:1265.25,productName:"Monitor LED 25'' Gamer LG",image:"https://images-submarino.b2w.io/produtos/01/00/img/1729775/6/1729775687_4GG.jpg"},{value:1151.1,productName:"Moto G9 Play",image:"https://images-submarino.b2w.io/produtos/01/00/img/1962217/0/1962217075_1SZ.jpg"},{value:159.6,productName:"Mouse Gamer Redragon Chroma",image:"https://images-submarino.b2w.io/produtos/01/00/img/46419/3/46419319_3GG.jpg"},{value:2922.99,productName:"Playstation 4 + 3 Games",image:"https://images-submarino.b2w.io/produtos/01/00/img/2317562/0/2317562028P1.jpg"},{value:10377.93,productName:"Smart TV OLED 65'' LG",image:"https://images-submarino.b2w.io/produtos/01/00/img/1735043/1/1735043183_1SZ.jpg"},{value:339,productName:"Teclado Gamer HyperX Alloy Core",image:"https://images-submarino.b2w.io/produtos/01/00/img/98025/6/98025652_1SZ.jpg"},{value:235.83,productName:"The Last Of Us Part II - PS4",image:"https://images-submarino.b2w.io/produtos/01/00/img/1459449/0/1459449098_1SZ.jpg"},{value:264.48,productName:"SSD 240 gb Plus - Sandisk",image:"https://images-submarino.b2w.io/produtos/01/00/images/134409/7/134409750P1.jpg"},{value:3403.08,productName:"Xbox Series S",image:"https://images-submarino.b2w.io/produtos/01/00/img/2117190/5/2117190565P1.jpg"}];let u;document.querySelector(".header__cart").addEventListener("click",(()=>{c.open("cart"),document.querySelector(".close-window-icon").addEventListener("click",(()=>{c.close("cart")})),r()})),document.querySelector(".header__menu").addEventListener("click",(()=>{c.openClose()})),document.querySelector(".form-overlay__form__actions").addEventListener("click",(e=>{"A"===e.target.tagName&&c.close("form")})),document.querySelector(".section-cards").innerHTML="",i.forEach((e=>{t.createDiv(e)})),document.querySelectorAll(".card").forEach(((t,o)=>{const{value:r,image:a}=i[o];t.addEventListener("click",(()=>{c.open("form"),function(t,o){document.querySelector(".form-overlay__form__calculation__cost").innerHTML=`Custo: ${e(0)}`,function(e){const t=document.querySelector(".form-overlay__form__img"),o=document.createElement("img");t.appendChild(o),o.classList.add("img"),o.setAttribute("src",e)}(o),function(t,o=100){const r=document.querySelector(".form-overlay__form__calculation__cost"),a=document.querySelector(".form-overlay__form__calculation__quantity");document.querySelector('input[type="number"]').addEventListener("focus",(()=>{s.productsQuantity.oninput=function(){s.catchValues().productsQuantity>=o&&Number(s.productsQuantity.value=o);const c=s.catchValues().productsQuantity>1?" Unidades":" Unidade",i=t*s.catchValues().productsQuantity;if(s.catchValues().productsQuantity<=0)return r.innerHTML="Custo: "+e(i),void(a.innerHTML=0+c);r.innerHTML="Custo: "+e(i),a.innerHTML=s.catchValues().productsQuantity+c}}))}(t)}(r,a),u=i[o]}))})),document.querySelector("form").addEventListener("submit",(e=>{e.preventDefault(),s.submit(u)}))})();